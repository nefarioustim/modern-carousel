(function(f){f.fn.cleanWhitespace=function(){textNodes=this.contents().filter(function(){return this.nodeType==3&&!/\S/.test(this.nodeValue)}).remove()};f.fn.carousel=function(g){var b={visiblePanes:1,panesToMove:1,pagination:true,speed:200,loop:false,autoplay:false,hovercontrols:false,hoverpause:false,delay:2E3,transition:false};g&&f.extend(b,g);this.each(function(){var n,a=f(this),j=a.find(".clip:first"),k=j.find(">ul:first"),s=k.find(">li");b.aspectVert=/(vertical)/i.test(k.get(0).className);a.data("playing",
false);j.css("overflow","hidden");k.css({position:"relative"});j.cleanWhitespace();var o=j.width(),l=j.get(0).offsetHeight,d=0,i=s.length,q=b.aspectVert?Math.floor(l/b.visiblePanes):Math.floor(o/b.visiblePanes),h={prev:{},play:{},pause:{},next:{}},p=f('<div class="controls" />');basic=f('<ul class="basic" />');f.each(h,function(c){h[c]=f('<li class="'+c+'"><button>'+c+"</button></li>").find("button").data("name",c).end();basic.append(h[c])});basic.appendTo(p.appendTo(a));basic.delegate("button","click",
function(c){c.preventDefault();a.trigger("carousel-"+f(this).data("name"))});if(b.pagination){o=f('<ol class="pages" />');for(l=0;l<s.length/b.panesToMove;l++)f('<li><button value="'+l+'">'+parseInt(l+1,10)+"</button></li>").appendTo(o);o.appendTo(a.find(".controls"));o.delegate("button","click",function(c){c.preventDefault();a.trigger("carousel-jump",[c.target.value*b.panesToMove,d])})}b.hovercontrols&&p.hide();a.hover(function(){b.hovercontrols&&p.stop().fadeIn({duration:200,queue:false});if(b.hoverpause){if(a.data("playing"))var c=
true;a.trigger("carousel-pause");c&&a.data("playing",true)}},function(){b.hovercontrols&&p.fadeOut({duration:200,queue:false});b.hoverpause&&a.data("playing")&&a.trigger("carousel-play")});var m=function(c,e){if(e){c.removeClass("disabled");c.find("button").get(0).disabled=false}else{c.addClass("disabled");c.find("button").get(0).disabled=true}};a.bind("carousel-nav-state",function(){if(!b.loop){m(h.prev,d!=0);m(h.next,d!=i)}if(b.pagination){a.find(".pages .current").removeClass("current");a.find(".pages button").eq(Math.ceil(d/
b.panesToMove)).closest("li").addClass("current")}});a.bind("carousel-move",function(c,e){j.cleanWhitespace();i=k.find("> li").length;var r=d;e=e||1;d+=e*b.panesToMove;if(d+(b.visiblePanes-b.panesToMove)>=i){if(b.loop)d=0}else if(d<=-b.panesToMove)if(b.loop)d=i+e*b.panesToMove;a.trigger("carousel-jump",[d,r]);a.data("playing")&&!b.loop&&d==i&&a.trigger("carousel-pause")});a.bind("carousel-jump",function(c,e,r){if(e<0)e=0;if(e>i-b.visiblePanes)e=i-b.visiblePanes;d=e;c={duration:b.speed,queue:false,
complete:function(){a.trigger("carousel-nav-state")}};if(b.transition)a.carousel[b.transition]({carousel:a,defaults:b,delta:q,last:r,current:d,anim:c});else b.aspectVert?k.animate({top:-q*e+"px"},c):k.animate({left:-q*e+"px"},c)});a.bind("carousel-prev",function(){a.trigger("carousel-pause");a.trigger("carousel-move",-1)});a.bind("carousel-next",function(){a.trigger("carousel-pause");a.trigger("carousel-move",1)});a.bind("carousel-play",function(){a.data("playing",true);m(h.play,false);m(h.pause,
true);n=window.setInterval(function(){a.trigger("carousel-move",1)},b.delay)});a.bind("carousel-pause",function(){a.data("playing",false);m(h.pause,false);m(h.play,true);clearInterval(n)});a.trigger("carousel-nav-state");b.autoplay?a.trigger("carousel-play"):a.trigger("carousel-pause")});return this};f.fn.carousel.fade=function(g){var b=g.carousel.find(".clip>ul>li").eq(g.last),n=g.carousel.find(".clip>ul>li").eq(g.current);g.carousel.find(".clip>ul");b.css({position:"absolute",top:"0",left:"0","z-index":"1"});
n.hide().css({position:"absolute",top:"0",left:"0","z-index":"2"});g.anim.complete=function(){b.hide();g.carousel.trigger("carousel-nav-state")};n.fadeIn(g.anim)}})(jQuery);